
\section{Hinweise zur Installation freier und komerzieller Datenbanken, XML:DB's und Web--Komponenten}
%
%
\subsection{Installation der Komponenten unter Linux}
%
%
Die folgende Beschreibung erläutert die Arbeit unter SuSE Linux, getestet wurde unter der Version 8.2. Es ist besonders aus Sicherheitsgründen besonders zu empfehlen, auch die vom Distributor angebotenen Updates für die nachfolgenden Komponenten zu installieren. Sollten für RedHat Abweichungen auftreten, so werder diese gesondert vermerkt.


\subsubsection{Vorbereitung}

Als erster Schritt sind der Java-Compiler J2SE 1.3.1 oder höher und ANT zu installieren. Beide befinden sich unter in der SuSE in der Distribution. 
\begin{itemize}
\item {\bf java2-jre-1.3.1-521} oder höher
\item {\bf java2-1.3.1-521} oder höher
\item {\bf jakarta-ant-1.5-76} oder höher
\end{itemize}

Wenn allerdings SuSE von einem ftp Server installiert wird, so ist Java nicht standardmäßig enthalten. Dann bitte die Java Linux Version von der \url{www.blackdown.org}
\footnote{\url{ftp://ftp.informatik.hu-berlin.de/pub/Java/Linux/JDK-1.4.1/i386/01/j2sdk-1.4.1-01-linux-i586-gcc3.2.bin}}
Homepage runterladen und wie folgt installieren. Download nach beispielsweise
nach {\it /usr/local} anschließend mit {\tt chmod +x
  j2sdk-1.4.1-01-linux-<ARCH>.bin} ausführbar machen und ausführen {\tt
  ./j2sdk-1.4.1-01-linux-<ARCH>.bin}.  Damit die Pfad Variablen alle richtig
gesetzt werden eine Vorlage unter {\it/etc/java} entsprechend editieren und
mit {\tt setDefaultJava} als root die Links richtig setzten. Zudem sollte man
in der Datei {\it /etc/profile.local}\footnote{Falls diese noch nicht
  existiert einfach anlegen} noch die Variable {\it ANT\_HOME}\footnote{export
  ANT\_HOME=/opt/jakarta/ant} gesetzt werden. 

Sinnvollerweise sollten Sie sich einen Benutzer (z. B. {\bf mcradmin}) anlegen, unter welchem Sie dann Ihre Applikationen laufen lassen.

\subsubsection{Die Installation von MySQL}

\label{mysqlinstallation}
MySQL ist eine derzeit frei relationale Datenbank, welche zur schnellen Speicherung von Daten innerhalb des MyCoRe-Projektes benötigt wird. Sie besitzt eine JDBC Schnittstelle und ist SQL konform. Sie könnten MySQL auch durch eine andere verfügbare Datenbank mit gleicher Funktionalität ersetzen.
\begin{enumerate}
\item Installieren Sie aus Ihrer Distribution die folgenden Pakete und danach ggf. noch vom Hersteller der Distribution per Netz angebotene Updates. Die angegebenen versionsnummern sind nur exemplarisch.
\begin{itemize}
\item {\bf mysql-3.23.52-83} oder höher
\item {\bf mysql-shared-3.23.52-83} oder höher
\item {\bf mysql-client-3.23.52-83} oder höher
\item {\bf mysql-devel-3.23.52-83} oder höher
\item {\bf mysql-bench-3.23.52-83} oder höher
\end{itemize}
\item Die Dokumentation steht nun unter {\it /usr/share/doc/packages/mysql}.
\item Führen Sie das Kommando {\tt rcmysql start} als root aus. 
\item Führen Sie das Kommando {\tt /usr/bin/mysqladmin -u root password {\it new-password}} als root aus.
\item Die folgende Sequenz sorgt dafür, dass der MyCoRe-User {\bf mcradmin} alle Rechte auf der Datenbank hat. 
      Dabei werden bei der Ausführung von Kommandos von {\bf localhost} aus keine Passw"orter abgefragt. 
      Von anderen Hosts aus muss {\it ein-password} eingegeben werden.

{\tt
mysql --user=root -p{\it PASSWORD} mysql \newline
GRANT ALL PRIVILEGES ON *.* TO mcradmin@localhost WITH GRANT OPTION; \newline
GRANT ALL PRIVILEGES ON *.* TO mcradmin@'\%' IDENTIFIED BY '{\it ein-passwort}' \newline
WITH GRANT OPTION; \newline
quit \newline
}

\item Ist das Password einmal gesetzt, müssen Sie zusätzlich die Option -p verwenden.
\item Zum Verifizieren, ob der Server läuft nutzen Sie {\tt mysqladmin version} und  {\tt mysqladmin variables}.
\item jetzt können Sie die Datenbasis für MyCoRe mit nachstehendem Kommando anlegen.
{\tt
\begin{verbatim}
mysqladmin -u mcradmin create mycore 
\end{verbatim}
}
\item Falls weitere Benutzer noch das Recht auf Selects von allen Hosts aus haben sollen, verwenden Sie die Kommandos

{\tt
mysql --user=mcradmin -p{\it PASSWORD} mycore \newline
GRANT SELECT ON mycore.* TO mycorenutzer@'\%'; \newline
quit
}

\end{enumerate}

Falls sie keine Connection auf ihren Rechnernamen (nicht localhost) aufbauen können, kann es auch mit ihrer Firewall oder TCPWrapper Einstellung zu tun haben. Bei einer Firewall sollte der Port 3306 freigegeben werden und bei einem TCPWrapper der entsprechende Dienst (mysql) in die Datei {\it /etc/hosts.allow} geschrieben werden.

\subsubsection{Die Installation der freien XML:DB eXist}

eXist ist eine Frei verfügbare XML:DB, welche die entsprechenden Interfaces implementiert. 
Für MyCoRe wurde ein auf diesen Schnittstellen basierender Persitence-Layer implementiert. 
So ist die Nutzung von eXist direkt möglich.
\paragraph*{Vorbedingungen} 
Für das folgende Szenario ist darauf zu achten, dass der Tomcat bzw Websphere Server nicht auf den Port 8080 hört, 
da es ansonsten zu einem Konflikt mit der hier vorgestellten Installation kommt, 
weil der eXist servlet Container ebenfalls standardmäßig auf den port 8080 hört. 
Den Port für Tomact ändern sie in der {\it tomcatinstalldir/conf/server.xml}. 
Ebenfalls wird die in Kapitel \ref{mysqlinstallation} beschriebene MySQL-Installation vorausgesetzt. 
Desweiteren sollte die aktuellste Version von MyCoRe und dem MyCoRe Sample auf ihrem Rechner 
in \$MYCORE\_HOME bzw. \$MYCORE\_SAMPLE\_HOME liegen. 

\begin{enumerate}
\item Download der aktuellen Version von eXist von \url{http://exist-db.org/}. Achtung, da dieses Produkt noch stark im Wachsen ist, sollte hier die letzte Version geholt werden (cvs). Zum Test kam Version eXist-0.9.2.
\item entpacken Sie die Distribution in ein entsprechendes Verzeichnis, z. B. unter {\it /home/mcradmin} (eXist-installdir).
\item Entfernen Sie zur Nutzung des stand-alone-Servers den Kommentar aus der Zeile {\tt uri=xmldb:exist://localhost:8081} im File {\it client.properties} und achten sie darauf, dass die Zeile {\tt uri=xmldb:exist://localhost:8080/exist/xmlrpc} auskommentiert wird ( vorwegsetzten). Dies Einstellung wird zum Beispiel für die direkte Einbindung in Tomcat verwendet, wenn man über xmlrpc auf eXist zugreifen möchte.
\item Starten Sie den Server mit {\tt <eXist-installdir>/bin/startup.sh }.
\item unter der URL \url{http://localhost:8080/exist/index.xml} sollte jetzt die eXist-Homepage erscheinen. Dies nur als Test.
\item Wenn alles okay ist, starten Sie {\tt <eXist-installdir>/bin/server.sh }.
\item Anschliessend können Sie auch den Client mit {\tt <eXist-installdir>/bin/client.sh } starten. Hier sollten Sie dem Admin-User ein Password spendieren.
\end{enumerate}

\subsubsection{Die Installation von Apache 2}
\label{sec:apchache2_installation}

Im Linux-Umfeld kann der Apache-Webserver als Standard betrachtet werden. Er ist in allen gängigen Distributionen enthalten. Die allerneuesten Apache 2 Pakete sind zu finden unter \url{ftp://ftp.suse.com/pub/projects/apache/apache2/8.2-i386}. Installiern Sie folgende Komponenten:
\begin{itemize}
\item {\bf apache2-2.0.46-3} oder höher
\item {\bf apache2-doc-2.0.46-3} oder höher, dieses Paket ist optional
\item {\bf apache2-worker-2.0.46-3} oder höher
\end{itemize}
Mit \mcrcommand{rcapache2 start} wird der Server per default Einstellungen gestartet und sollte jetzt über \url{http://localhost} erreichbar sein. Etwaige Fehlermeldunge werden in \mcrfile{/var/log/apache2/error\_log} geschrieben.\\[2ex]
Die zentrale Konfigurationsdatei des Apache2 ist die unter \mcrpath{/etc/apache2} liegende Datei \mcrfile{httpd.conf}. Bevor irgendwelche Änderungen vorgenommen werden bitte immer ein Sicherheitskopie anlegen. Der Befehl (als root) \mcrcommand{/usr/sbin/apache2ctl configtest} Überprüft die Syntax ihrer geänderten Einstellungen.
Vorerst sollten jedoch die Standard Einstellungen genügen.
Mit \mcrcommand{rcapache2 [start; stop; restart]} als root kann der Server gestartet gestoppt bzw neugestartet werden und über \mcrcommand{rcapache2 [status]} wird der aktuelle Staus abgefragt.

\subsubsection{Die Installation von Tomcat 4}

Wie Apache, dessen Installation im vorigen Abschnitt \ref{sec:apchache2_installation} beschrieben wurde,  
ist auch Tomcat als Servlet-Engine im Linux-Umfeld ein Quasi-Standard. 
Für die Arbeit der Web-Anwendung des MyCoRe-Projektes wird dieses Tool zwingend benötigt. 
Installiern Sie folgende Komponenten:
\begin{itemize}
\item {\bf jakarta-tomcat-4.1.18-31} oder höher
\item {\bf apache2-jakarta-tomcat-connectors-4.1.18-31} oder höher
\end{itemize}
Im File \mcrfile{/etc/profile.local} ist folgender Eintrag vorzunehmen, 
damit Tomcat auch von {\bf mcradmin} genutzt werden kann. Weiterhin werden der Memory Size für den Server erweitert.
\begin{verbatim}
export CATALINA_HOME=/opt/jakarta/tomcat
export CATALINA_OPTS="$CATALINA_OPTS -server -Xms256m -Xmx1800m -Xincgc"
\end{verbatim}
Weiterhin ist noch die richtige Gruppenzugehörigkeit für die Tomcat-Installation festzulegen.
\begin{verbatim}
chown wwwrun:nogroup -R /opt/jakarta/tomcat
\end{verbatim}
Mit \mcrcommand{rctomcat [start; stop; restart]} als root kann der Server gestartet gestoppt bzw 
neugestartet werden und über \mcrcommand{rctomcat [status]} wird der aktuelle Staus abgefragt. 
Nach erfolgreichem starten des Tomcat Servers sollte er unter der Standardadresse \url{http://localhost:8080/examples} 
erreichbar sein. 
Bitte beachten Sie aber, dass der standardm"assige Port 8080 auch von eXist (falls Sie dies verwenden)
verwendet wird.
In diesem Fall m"ussen Sie in der Konfigurationsdatei {\it server.xml} einen anderen Port ausw"ahlen.
Die Dokumentation steht unter \url{http://localhost:8080/tomcat-docs}.
%
%
\subsection{Installation der Komponenten unter MS Windows}
%
%
\subsubsection{Die Installation der freien XML:DB eXist}
eXist ist eine frei verfügbare XML:DB, welche die entsprechenden Interfaces implementiert. Für MyCoRe wurde ein auf diesen Schnittstellen basierender Persistence-Layer implementiert. So sollte die Nutzung von eXist direkt möglich sein.
\begin{enumerate}
\item Download der aktuellen Version von eXist von \url{http://exist-db.org/}. Achtung, da dieses Produkt noch stark im Wachsen ist, sollte hier die letzte Version geholt werden. Zum Test kam Version eXist-0.9.2.
\item entpacken Sie die Distribution in ein entsprechendes Verzeichnis.
\item Entfernen Sie zur Nutzung des stand-alone-Servers den Kommentar aus der Zeile {\tt uri=xmldb:exist://localhost:8081} im File {\it <installdir>\\eXist-0.9.2\\client.properties}.
\item Starten Sie {\tt <installdir>\\eXist-0.9.2\\bin\\server.bat }.
\item Anschließend können Sie auch den Client mit {\tt <installdir>\\eXist-0.9.2\\bin\\client.bat } starten. Hier sollten Sie dem Admin-User ein Password spendieren.
\end{enumerate}
%
%

%
%

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "UserGuide"
%%% End: 
